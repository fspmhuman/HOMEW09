<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>模拟京东楼层</title>
		<style type="text/css">
			body{margin: 0;
			position: relative;}
			aside{
				width: 60px;
				height: 300px;
				left:0;
				background: #666;
				position: absolute;
				font-size: 8px;
/*top:200px;*/
			}
			li{
				list-style: none;
				margin: 10px;
				padding: 5px;
				cursor: pointer;
			}
			
			header{
				width: 100%;
				top:0;
				left: 60px;
				position: absolute;
			}
			footer,section{
				width: 100%;
			}
			footer{
				height: 500px;
				margin: 5px;
				background: #999;
			}
			section{
				height: 440px;
				margin: 5px;
				background: #0ee;
			}
			#ding{
				margin-top: 0;
			}
		</style>
	</head>
	<body>
		<aside>
				<li>1F</li>
				<li>2F</li>
				<li>3F</li>
				<li>4F</li>
				<li>5F</li>
				<li>6F</li>
				<li>7F</li>
			</aside>
		<header>
			<footer id="ding"></footer>
			<section class="Sec"></section>
			<section></section>
			<section></section>
			<section></section>
			<section></section>
			<section></section>
			<section></section>
			<footer></footer>
		</header>
		
		<script type="text/javascript">
			
			var ad =document.querySelector('aside');
			var oLis =document.querySelectorAll('aside li');
			var oFooter =document.querySelector('#ding');
			var oSection=document.querySelector(".Sec");
			var footerHeight =parseFloat(getComputedStyle(oFooter)["height"])
			var oSectionHeight=parseFloat(getComputedStyle(oSection)["height"])
			
			document.onmousewheel =function(){
	        var windowHeight = document.documentElement.clientHeight;
            var adHeight = ad.clientHeight;
            var scrollHeight = document.body.scrollTop || document.documentElement.scrollTop;
            ad.style.top = (windowHeight - adHeight) / 2 + scrollHeight +'px';
			}
			window.onscroll =function(){
				var st =document.body.scrollTop ||document.documentElement.scrollTop;
				if(st>=footerHeight && st<=footerHeight+oSectionHeight){
					oLis[0].innerHTML="童装";
				}else{oLis[0].innerHTML="F1";} 
				if(st>=footerHeight+oSectionHeight && st<=footerHeight+oSectionHeight*2){
					oLis[1].innerHTML="男装"}
					else {oLis[1].innerHTML="F2"}
				if(st>=footerHeight+oSectionHeight*2 && st<=footerHeight+oSectionHeight*3){
					oLis[2].innerHTML="女装";}
					else {oLis[2].innerHTML="F3";}
					if(st>=footerHeight+oSectionHeight*3 && st<=footerHeight+oSectionHeight*4){
					oLis[3].innerHTML="男鞋";}
					else {oLis[3].innerHTML="F4";}
					if(st>=footerHeight+oSectionHeight*4 && st<=footerHeight+oSectionHeight*5){
					oLis[4].innerHTML="女鞋";}
					else {oLis[4].innerHTML="F5";}
					if(st>=footerHeight+oSectionHeight*5 && st<=footerHeight+oSectionHeight*6){
					oLis[5].innerHTML="电器";}
					else{oLis[5].innerHTML="F6";} 
					if(st>=footerHeight+oSectionHeight*6 && st<=footerHeight+oSectionHeight*7){
					oLis[6].innerHTML="家具";}else{
						oLis[6].innerHTML="F7";
					}
				};
		for(var i=0;i<=oLis.length-1;i++){
			(function(m){
					oLis[m].onclick = function (){
			        scrollAnimate(footerHeight+oSectionHeight*m,1000);
                    ad.style.top = (windowHeight - adHeight) / 2 + scrollHeight +'px';
			        
			};
			})(i);
			}
			
			 function scrollAnimate(target, time) {
        var frameNumber = 0;	//帧编号
        var start = document.body.scrollTop || document.documentElement.scrollTop;	 //起点
        var distance = target - start;
        var interval = 10;
        var maxFrame = time / interval;

        clearInterval(timer);
        var timer = setInterval(function () {
          frameNumber++;
          if (frameNumber == maxFrame) {
            document.body.scrollTop = document.documentElement.scrollTop = target;
            clearInterval(timer);
          }
          //第一个参数t表示当前帧编号
          //第二个参数b表示起始位置
          //第三个参数c表示变化量
          //第四个参数d表示总帧数
          //返回当前帧应该在哪儿
          document.body.scrollTop = document.documentElement.scrollTop = CubicEaseInOut(frameNumber, start, distance, maxFrame);
        }, 10);


        function CubicEaseInOut(t, b, c, d) {
          if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
          return c / 2 * ((t -= 2) * t * t + 2) + b;
        }
      }
		</script>
	</body>
</html>
